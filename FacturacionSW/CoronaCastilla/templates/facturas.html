{% extends 'base.html' %}
{% load static %}
{% block title %} Facturas {% endblock %}

{% block content %}
<main class="main">
    <div class="main__buttons">
        <button class="main__buttons__create" onclick="window.location.href= `{% url 'nuevaFactura' %}`">Crear
            Factura</button>
        <button class="main__buttons__create" onclick="window.location.href= `{% url 'exportar_facturas' %}`">Descargar
            resumen de facturas</button>
    </div>
    <div class="main__filter">
        <form id="filter-client-form" action="{% url 'facturas' %}" method="GET">
            <input type="text" name="cliente" placeholder="Buscar por nombre de cliente" class="main__filter__input"
                value="{{ request.GET.cliente }}" onchange="this.form.submit()">
        </form>
    </div>
    <div class="main__buttons main__buttons-big">
        <form id="filter-form" action="{% url 'facturas' %}" method="GET" class="main__buttons__find">
            {{ form.uno }} 01
            {{ form.dos }} 02
            {{ form.tres }} 03
            {{ form.cuatro }} 04
            {{ form.cinco }} 05
            {{ form.seis }} 06
            {{ form.siete }} 07
            {{ form.ocho }} 08
            {{ form.nueve }} 09
            {{ form.diez }} 10
            {{ form.once }} 11
            {{ form.doce }} 12
            {{ form.año }}
            <button class="main__buttons__create" type="submit">Mostrar</button>
        </form>
    </div>
    <table class="main__table">
        <thead class="main__table__head">
            <tr class="main__table__head__row">
                <th class="main__table__head__row__th">Nº Factura</th>
                <th class="main__table__head__row__th">Fecha Exp.</th>
                <th class="main__table__head__row__th">Cliente</th>
                <th class="main__table__head__row__th">Descripción</th>
            </tr>
        </thead>
        <tbody class="main__table__body">
            {% for factura in facturas %}
            <tr class="main__table__body__row"
                onclick="window.location.href= `{% url 'facturaDetails' factura_id=factura.id %}`">
                <td class="main__table__body__row__th">{{ factura.numero_factura }}</td>
                <td class="main__table__body__row__th">{{ factura.fecha_salida }}</td>
                <td class="main__table__body__row__th">{{ factura.cliente_nombre }}</td>
                <td class="main__table__body__row__th">{{ factura.habitacion }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <div class="main__total">
        <p class="main__total__text">Total Facturado: </p>
        <input type="text" class="main__total__input" value="{{ total_facturado}}">
    </div>
</main>
<script src="{% static 'resources/js/facturasAll.js' %}"></script>
{% endblock %}